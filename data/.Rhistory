rev_cols <- c(rev_cols, rating)
}
}
restaurants$avgReviewRating <- rev_cols
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (30%%i == 0){
rating_count <- rating_count + reviews$rating[i]
}
else{
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
}
}
restaurants$avgReviewRating <- rev_cols
rest_cols <- c()
for (i in 1:nrow(restaurants)){
for (j in 1:30){
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
}
else{
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (30%%i == 0){
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (30%%i == 0){
rating_count <- rating_count + reviews$rating[i]
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
View(resturaunts)
View(reviews)
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (30%%i == 0){
rating_count <- rating_count + reviews$rating[i]
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
rating_count <- 0
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
nrow(reviews)
2460/30
30%%30
30%%1
30%%2
30%%4
1%%30
30%%30
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (i%%30 == 0){
rating_count <- rating_count + reviews$rating[i]
rating <- rating_count/30
rev_cols <- c(rev_cols, rating)
rating_count <- 0
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
restaurants$avgReviewRating <- rev_cols
View(restaurants)
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (i%%30 == 0){
rating_count <- rating_count + reviews$rating[i]
rating <- rating_count/30
rev_cols <- c(rev_cols, as.integer(rating))
rating_count <- 0
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
cusines <- ggplot(data = resturaunts, aes(x = cusines) + geom_bar(stat = "identity"))
cusines <- ggplot(data = resturaunts, aes(x = cusines, y = count(cusines)) + geom_bar(stat = "identity"))
cusines <- ggplot(data = resturaunts, aes(x = cusines, y = count(cusines)) + geom_histogram()
cusines <- ggplot(data = resturaunts, aes(x = cusines, y = count(cusines)) + geom_histogram())
cusines <- ggplot(data = resturaunts, aes(x = cusines, y = count(cusines)) + geom_histogram())
cusines <- ggplot(data = resturaunts, aes(x = cusines) + geom_histogram())
cusines <- ggplot(data = resturaunts, aes(x = Cusine) + geom_histogram())
cusines <- ggplot(data = resturaunts, aes(x = Cusine) + geom_bar())
cusines <- ggplot(data = resturaunts, aes(x = Cusine)) + geom_bar()
cusines
cusines <- ggplot(data = resturaunts, aes(x = cusines)) + geom_bar()
cusines
cusines <- ggplot(data = resturaunts, aes(x = Cuisne)) + geom_bar()
cusines
2+4+13+9+4+10+7+5+3+4+4
82-65
cusineData <- data.frame(Cusines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cusines <- ggplot(data = resturaunts, aes(x = Cuisne)) + geom_bar()
cusines
cusineData <- data.frame(Cusines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cusines <- ggplot(data = cusineData, aes(x = Cuisnes)) + geom_bar()
cusines
cusineData <- data.frame(Cusines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cusines <- ggplot(data = cusineData, aes(x = Cusines, y = Count)) + geom_bar()
cusines
cusineData <- data.frame(Cusines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cusines <- ggplot(data = cusineData, aes(x = Cusines)) + geom_bar()
cusines
cusineData <- data.frame(Cusines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cusines <- ggplot(data = cusineData, aes(x = Cusines, y = Count)) + geom_bar(stat = "identity")
cusines
cuisineData <- data.frame(Cuisines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cuisines <- ggplot(data = cuisineData, aes(x = Cuisines, y = Count)) + geom_bar(stat = "identity") + ggtitle("Cuisine Distribution of 2023 Toronot Michelin Star Restaurants") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"))
cuisines
cuisineData <- data.frame(Cuisines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cuisines <- ggplot(data = cuisineData, aes(x = Cuisines, y = Count)) + geom_bar(stat = "identity") + ggtitle("Cuisine Distribution of 2023 Toronot Michelin Star Restaurants") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Medit. and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"))
cuisines
cuisineData <- data.frame(Cuisines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cuisines <- ggplot(data = cuisineData, aes(x = Cuisines, y = Count)) + geom_bar(stat = "identity") + ggtitle("Cuisine Distribution of 2023 Toronot Michelin Star Restaurants") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"))
cuisines
cuisineData <- data.frame(Cuisines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cuisines <- ggplot(data = cuisineData, aes(x = Cuisines, y = Count)) + geom_bar(stat = "identity") + ggtitle("Cuisine Distribution of 2023 Toronto Michelin Star Restaurants") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"))
cuisines
ratingGraph <- ggplot(data = resturaunts, aes(x = avgReviewRating)) + geom_histogram()
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram()
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram()+ ggtitle("Ratings Distribution for Michelin Star Resturaunts") + theme(scale_x_discrete(limits=c(3, 4, 5)))
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram()+ ggtitle("Ratings Distribution for Michelin Star Resturaunts") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c(3, 4, 5))
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram()
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram() + ggtitle("Cuisine Distribution of 2023 Toronto Michelin Star Restaurants")
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram() + ggtitle("Rating Distribution of 2023 Toronto Michelin Star Restaurants, based on recent 30 Reviews")
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram() + ggtitle("Rating Distribution of 2023 Toronto Michelin Star Restaurants (recent 30")
ratingGraph
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram() + ggtitle("Rating Distribution of 2023 Toronto Michelin Star Restaurants (recent 30)")
ratingGraph
costGraph <- ggplot(data = restaurants, aes(x = Number_.)) + geom_histogram() + ggtitle("Cost rating of 2023 Toronto Michelin Star Resturaunts")
costGraph
knitr::opts_chunk$set(echo = TRUE)
library(openintro) ## Load the package
library(tidyverse)
library(dplyr)
library(broom)
library(ggplot2)
citydata  <- read.csv("census21_data.csv", header = T)
View(citydata)
incomeData <- data.frame(citydata$GeoUID, citydata$v_CA21_924..Under..5.000,  citydata$v_CA21_925...5.000.to..9.999, citydata21$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999, citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)
# geouid, income levels
incomeData <- data.frame(citydata$GeoUID, citydata$v_CA21_924..Under..5.000,  citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999, citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)
levels <- c()
for (i in 1:nrow(citydata)){
if (citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 - citydata$v_CA21_924..Under..5.000 +  citydata$v_CA21_925...5.000.to..9.999 + citydata$v_CA21_926...10.000.to..14.999 + citydata$v_CA21_927...15.000.to..19.999 + citydata$v_CA21_928...20.000.to..24.999 + citydata$v_CA21_929...25.000.to..29.999 + citydata$v_CA21_930...30.000.to..34.999 + citydata$v_CA21_931...35.000.to..39.999 + citydata$v_CA21_932...40.000.to..44.999 + citydata$v_CA21_933...45.000.to..49.999 > sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "low"
levels <- c(levels, level)
}
else if (citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 -  sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999) > sum( citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "high"
levels <- c(levels, level)
}
else{
level <- "medium"
levels <- c(levels, level)
}
}
# geouid, income levels
incomeData <- data.frame(citydata$GeoUID, citydata$v_CA21_924..Under..5.000,  citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999, citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)
levels <- c()
for (i in 1:nrow(citydata)){
if ((citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 - sum(citydata$v_CA21_924..Under..5.000, citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999)) > sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "low"
levels <- c(levels, level)
}
else if ((citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 -  sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999)) > sum( citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "high"
levels <- c(levels, level)
}
else{
level <- "medium"
levels <- c(levels, level)
}
}
for (i in 1:nrow(citydata)){
if ((citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 - sum(citydata$v_CA21_924..Under..5.000, citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999)) > sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "low"
levels <- c(levels, level)
}
else if ((citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 -  sum(citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999)) > sum( citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)){
level <- "high"
levels <- c(levels, level)
}
else{
level <- "medium"
levels <- c(levels, level)
}
}
(citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 - sum(citydata$v_CA21_924..Under..5.000, citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999)
((citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019 - sum(citydata$v_CA21_924..Under..5.000, citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999))
1
sum(1 + 2 + 3)
5 - sum(1, 2, 3)
sum(1, 2, 3)
sum(citydata$v_CA21_924..Under..5.000, citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999)
citydata$[2]
for (i in n.row(citydata)){
if (is.na(citydata[i,])){
citydata[-i,]
}
}
for (i in nrow(citydata)){
if (is.na(citydata[i,])){
citydata[-i,]
}
}
View(citydata)
# tract populations, dwellings and households + GEOUID
populationLabels <- c("GeoUID", "Population", "Households", "Dwellings")
populationData <- data.frame(citydata$GeoUID, citydata$Population, citydata$Households, citydata$Dwellings)
for (i in nrow(citydata)){
if (is.na(citydata[i, citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019])){
citydata[-i,]
}
}
if (is.na(citydata[citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019, i])){
citydata[-i,]
}
for (i in nrow(citydata)){
if (is.na(citydata[citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019, i])){
citydata[-(,i)]
for (i in nrow(citydata)){
if (is.na(citydata[citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019, i])){
citydata[-(i,)]
citydata[-(i)]
for (i in nrow(citydata)){
if (is.na(citydata[citydata$v_CA21_923..Number.of.after.tax.income.recipients.aged.15.years.and.over.in.private.households.in.2019, i])){
citydata[-(i)]
}
}
knitr::opts_chunk$set(echo = TRUE)
library(openintro) ## Load the package
library(tidyverse)
library(dplyr)
library(broom)
library(ggplot2)
citydata  <- read.csv("census21_data.csv", header = T)
# tract populations, dwellings and households + GEOUID
populationLabels <- c("GeoUID", "Population", "Households", "Dwellings")
populationData <- data.frame(citydata$GeoUID, citydata$Population, citydata$Households, citydata$Dwellings)
write.csv(populationData, file = "population.csv", row.names=TRUE)
# geouid, commute stats
commuteData <- data.frame(citydata$GeoUID, citydata$v_CA21_7632..Total...Main.mode.of.commuting.for.the.employed.labour.force.aged.15.years.and.over.with.a.usual.place.of.work.or.no.fixed.workplace.address, citydata$v_CA21_7635..Car..truck.or.van, citydata$v_CA21_7644..Public.transit, citydata$v_CA21_7647..Walked, citydata$v_CA21_7650..Bicycle, citydata$v_CA21_7653..Other.method)
write.csv(commuteData, file = "commute.csv", row.names=TRUE)
comlabels <- c("Drove", "Transit", "Walked", "Bicycle", "Other")
comvals <- c(commuteData$citydata.v_CA21_7635..Car..truck.or.van, commuteData$citydata.v_CA21_7644..Public.transit, commuteData$citydata.v_CA21_7647..Walked, commuteData$citydata.v_CA21_7650..Bicycle, commuteData$citydata.v_CA21_7653..Other.method)
comChart <- data.frame(comlabels, comvals)
commuteMethod <- ggplot(comChart, aes(x = comlabels, y = comvals))  + geom_bar(stat = "identity") + labs(title = "Method of Commutes in Toronto", x = "Commute Method", y = "Count") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits = c("Drove", "Transit", "Walked","Bicycle",  "Other")) + coord_cartesian(ylim=c(150000, 165000))
commuteMethod
# geouid, income levels
incomeData <- data.frame(citydata$GeoUID, citydata$v_CA21_924..Under..5.000,  citydata$v_CA21_925...5.000.to..9.999, citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999, citydata$v_CA21_928...20.000.to..24.999, citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999, citydata$v_CA21_931...35.000.to..39.999, citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999, citydata$v_CA21_934...50.000.to..59.999, citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999, citydata$v_CA21_937...80.000.to..89.999, citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999, citydata$v_CA21_941...125.000.to..149.999, citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)
write.csv(incomeData, file = "income.csv", row.names=TRUE)
incomeLevels <-  c(citydata$v_CA21_924..Under..5.000 + citydata$v_CA21_925...5.000.to..9.999 + citydata$v_CA21_926...10.000.to..14.999, citydata$v_CA21_927...15.000.to..19.999 + citydata$v_CA21_928...20.000.to..24.999 + citydata$v_CA21_929...25.000.to..29.999, citydata$v_CA21_930...30.000.to..34.999 + citydata$v_CA21_931...35.000.to..39.999 + citydata$v_CA21_932...40.000.to..44.999, citydata$v_CA21_933...45.000.to..49.999 + citydata$v_CA21_934...50.000.to..59.999 + citydata$v_CA21_935...60.000.to..69.999, citydata$v_CA21_936...70.000.to..79.999 + citydata$v_CA21_937...80.000.to..89.999 + citydata$v_CA21_938...90.000.to..99.999, citydata$v_CA21_940...100.000.to..124.999 + citydata$v_CA21_941...125.000.to..149.999 + citydata$v_CA21_942...150.000.to..199.999, citydata$v_CA21_943...200.000.and.over)
incomeLevelLables <- c("Under 15,000", "15,000 to 29,999", "30,000 to 44,999", "45,000 to 69,999", "70,000 to 99,999", "100,000 to 199,999", "200,000 and over")
income <- data.frame(Bracket = incomeLevelLables, Count = incomeLevels)
incomeLevelsPlot <- ggplot(income, aes(x = Bracket, y = Count)) + geom_bar(stat = "identity") + ggtitle("Income Brackets in Toronto in 2021") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=incomeLevelLables) + coord_cartesian(ylim=c(150000, 170000))
incomeLevelsPlot
avgLowIncome <- (sum(incomeData$citydata.v_CA21_924..Under..5.000)*5000 + sum(incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + sum(incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + sum(incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + sum(incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + sum(incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + sum(incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + sum(incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + sum(incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/9
avgLowIncome
sum(incomeData$citydata.v_CA21_924..Under..5.000)*5000
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + sum(incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + sum(incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + sum(incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + sum(incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + sum(incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + sum(incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + sum(incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + sum(incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/9
avgLowIncome
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/9
avgLowIncome
incomeData$citydata.v_CA21_924..Under..5.000
avgLowIncome <- sum(((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/9)
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/9
avgLowIncome
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)
mean(avgLowIncome, 9)
avglow <- mean(avgLowIncome, 9)
avglow
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)
avgLowIncome
avglow <- mean(avgLowIncome, 9)
avglow
avglow <- mean(avgLowIncome, num(avgLowIncome))
avglow <- mean(avgLowIncome, 585)
avglow
sum(avgLowIncome)
avgLowIncome <- c((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)
avglow <- mean(avgLowIncome, 585)
VGLOW
sum(avgLowIncome)
avglow <- mean(avgLowIncome, na.rm = TRUE)
avglow
avgLowIncome <- ((incomeData$citydata.v_CA21_924..Under..5.000)*5000 + (incomeData$citydata.v_CA21_925...5.000.to..9.999)*10000 + (incomeData$citydata.v_CA21_926...10.000.to..14.999)*15000 + (incomeData$citydata.v_CA21_927...15.000.to..19.999)*20000 + (incomeData$citydata.v_CA21_928...20.000.to..24.999)*25000 + (incomeData$citydata.v_CA21_929...25.000.to..29.999)*30000 + (incomeData$citydata.v_CA21_930...30.000.to..34.999)*35000 + (incomeData$citydata.v_CA21_931...35.000.to..39.999)*40000 + (incomeData$citydata.v_CA21_932...40.000.to..44.999)*45000)/ sum((incomeData$citydata.v_CA21_924..Under..5.000) + (incomeData$citydata.v_CA21_925...5.000.to..9.999) + (incomeData$citydata.v_CA21_926...10.000.to..14.999) + (incomeData$citydata.v_CA21_927...15.000.to..19.999) + (incomeData$citydata.v_CA21_928...20.000.to..24.999) + (incomeData$citydata.v_CA21_929...25.000.to..29.999) + (incomeData$citydata.v_CA21_930...30.000.to..34.999) + (incomeData$citydata.v_CA21_931...35.000.to..39.999) + (incomeData$citydata.v_CA21_932...40.000.to..44.999), na.rm = TRUE)
avgLowIncome
sum(avgLowIncome)
sum(avgLowIncome, na.rm = TRUE)
avgHighIncome <- ((incomeData$citydata.v_CA21_940...100.000.to..124.999)*125000 +
(incomeData$citydata.v_CA21_941...125.000.to..149.999)*150000 + (incomeData$citydata.v_CA21_942...150.000.to..199.999)*175000 + (incomeData$citydata.v_CA21_943...200.000.and.over)*200000)/sum((incomeData$citydata.v_CA21_940...100.000.to..124.999) +
(incomeData$citydata.v_CA21_941...125.000.to..149.999) + (incomeData$citydata.v_CA21_942...150.000.to..199.999) + (incomeData$citydata.v_CA21_943...200.000.and.over), na.rm = TRUE)
avgHighIncome
sum(avgHighIncome, na.rm = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(openintro) ## Load the package
library(tidyverse)
library(dplyr)
library(broom)
library(ggplot2)
restaurants <- read.csv("377_restaurants.csv", header = T)
reviews <- read.csv("resturaunt_user_reviews.csv", header = T)
# positive: good, delicious, nearby, enjoyed, good service, coming back, menu, returning, cheap
# negative: poor, bad service, expensive, bad, cold, long, pricey
positive <- c("good", "delicious", "nearby", "enjoy", "enjoyed", "service", "will", "come", "back", "menu", "return", "returning", "cheap")
negative <- c("poor", "bad", "service", "expensive", "bad", "cold", "long", "pricey", "won't", "disappointing", "terrible", "worse")
library(glue)
library(stringr)
rev <- data_frame(reviews$caption)
reviewText <- c()
sentiments <- c()
for (i in nrow(rev)){
text <- trimws(rev[i,])
reviewText <- gsub("\\$", "", text)
tokens <- c(reviewText)
tokens <- c(strsplit(as.character(tokens), " "))
positive_num <- 0
negative_num <- 0
positive_num <- length(intersect(positive, tokens))
negative_num <- length(intersect(negative, tokens))
if (positive_num - negative_num >= 0){
sentiment <- "positive"
}
else{
sentiment <- "negative"
}
sentiments <- c(sentiments, sentiment)
}
rev <- data_frame(reviews$caption)
reviewText <- c()
sentiments <- c()
knitr::opts_chunk$set(echo = TRUE)
library(openintro) ## Load the package
library(tidyverse)
library(dplyr)
library(broom)
library(ggplot2)
restaurants <- read.csv("377_restaurants.csv", header = T)
reviews <- read.csv("resturaunt_user_reviews.csv", header = T)
rest_cols <- c()
for (i in 1:nrow(restaurants)){
for (j in 1:30){
rest_cols <- c(rest_cols, restaurants$Ã¯..Restaurant_Name[i])
}
}
reviews$restaurantName <- rest_cols
rev_cols <- c()
rating_count <- 0
for (i in 1:nrow(reviews)){
if (i%%30 == 0){
rating_count <- rating_count + reviews$rating[i]
rating <- rating_count/30
rev_cols <- c(rev_cols, as.integer(rating))
rating_count <- 0
}
else{
rating_count <- rating_count + reviews$rating[i]
}
}
restaurants$avgReviewRating <- rev_cols
# row 5 (ration:beverly) NA rating
cuisineData <- data.frame(Cuisines = c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"),
Count = c(2, 4, 13, 9, 4, 10, 7, 3, 5, 3, 4, 4, 2, 12))
cuisines <- ggplot(data = cuisineData, aes(x = Cuisines, y = Count)) + geom_bar(stat = "identity") + ggtitle("Cuisine Distribution of 2023 Toronto Michelin Star Restaurants") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(limits=c("Asian", "Chinese", "Contemporary", "French", "Indian", "Italian", "Japanese", "Mediterranean and Mid. East", "Mexican", "Seafood", "Spanish", "Thai", "Vietnamese", "Other"))
cuisines
ratingGraph <- ggplot(data = restaurants, aes(x = avgReviewRating)) + geom_histogram() + ggtitle("Rating Distribution of 2023 Toronto Michelin Star Restaurants (recent 30)")
ratingGraph
costGraph <- ggplot(data = restaurants, aes(x = Number_.)) + geom_histogram() + ggtitle("Cost rating of 2023 Toronto Michelin Star Resturaunts")
costGraph
# positive: good, delicious, nearby, enjoyed, good service, coming back, menu, returning, cheap
# negative: poor, bad service, expensive, bad, cold, long, pricey
positive <- c("good", "delicious", "nearby", "enjoy", "enjoyed", "service", "will", "come", "back", "menu", "return", "returning", "cheap")
negative <- c("poor", "bad", "service", "expensive", "bad", "cold", "long", "pricey", "won't", "disappointing", "terrible", "worse")
library(glue)
library(stringr)
rev <- data_frame(reviews$caption)
reviewText <- c()
sentiments <- c()
for (i in nrow(rev)){
text <- trimws(rev[i,])
reviewText <- gsub("\\$", "", text)
tokens <- c(reviewText)
tokens <- c(strsplit(as.character(tokens), " "))
positive_num <- 0
negative_num <- 0
positive_num <- length(intersect(positive, tokens))
negative_num <- length(intersect(negative, tokens))
if (positive_num - negative_num >= 0){
sentiment <- "positive"
}
else{
sentiment <- "negative"
}
sentiments <- c(sentiments, sentiment)
}
View(rev)
View(reviews)
View(reviews)
for (i in nrow(rev)){
if (rev[i,] != ""){
text <- trimws(rev[i,])
reviewText <- gsub("\\$", "", text)
tokens <- c(reviewText)
tokens <- c(strsplit(as.character(tokens), " "))
positive_num <- 0
negative_num <- 0
positive_num <- length(intersect(positive, tokens))
negative_num <- length(intersect(negative, tokens))
if (positive_num - negative_num >= 0){
sentiment <- "positive"
}
else{
sentiment <- "negative"
}
sentiments <- c(sentiments, sentiment)
}
}
sentiments
View(rev)
View(rev)
rev[2,]
View(tokens)
View(tokens)
for (i in nrow(rev)){
if (rev[i,] != ""){
text <- trimws(rev[i,])
reviewText <- gsub("\\$", "", text)
tokens <- c(reviewText)
tokens <- c(strsplit(as.character(tokens), " "))
positive_num <- 0
negative_num <- 0
positive_num <- length(intersect(positive, tokens))
negative_num <- length(intersect(negative, tokens))
if (positive_num - negative_num >= 0){
sentiment <- "positive"
}
else{
sentiment <- "negative"
}
sentiments <- c(sentiments, sentiment)
}
}
2021 <- read.csv("census21_data.csv", header = T)
knitr::opts_chunk$set(echo = TRUE)
library(openintro) ## Load the package
library(tidyverse)
library(dplyr)
library(broom)
library(ggplot2)
restaurants <- read.csv("377_restaurants.csv", header = T)
reviews <- read.csv("resturaunt_user_reviews.csv", header = T)
2021 <- read.csv("census21_data.csv", header = T)
data21 <- read.csv("census21_data.csv", header = T)
data06 <- read.csv("census06_data.csv", header = T)
View(data21)
View(data21)
# 2021
raceData21 <- data.frame(data21$GeoUID, data21$v_CA21_4878..South.Asian, data21$v_CA21_4881..Chinese, data21$v_CA21_4884..Black, data21$v_CA21_4887..Filipino, data21$v_CA21_4890..Arab, data21$v_CA21_4893..Latin.American, data21$v_CA21_4896..Southeast.Asian, data21$v_CA21_4899..West.Asian, data21$v_CA21_4902..Korean, data21$v_CA21_4905..Japanese, , data21$v_CA21_4908..Visible.minority..n.i.e.,  data21$v_CA21_4911..Multiple.visible.minorities, data21$v_CA21_4914..Not.a.visible.minority)
# 2021
raceData21 <- data.frame(data21$GeoUID, data21$v_CA21_4878..South.Asian, data21$v_CA21_4881..Chinese, data21$v_CA21_4884..Black, data21$v_CA21_4887..Filipino, data21$v_CA21_4890..Arab, data21$v_CA21_4893..Latin.American, data21$v_CA21_4896..Southeast.Asian, data21$v_CA21_4899..West.Asian, data21$v_CA21_4902..Korean, data21$v_CA21_4905..Japanese, data21$v_CA21_4908..Visible.minority..n.i.e.,  data21$v_CA21_4911..Multiple.visible.minorities, data21$v_CA21_4914..Not.a.visible.minority)
View(dat)
View(dat)
View(data06)
# 2006
raceData06 <- data.frame(data06$GeoUID, data06$v_CA06_1304..Chinese, data06$v_CA06_1305..South.Asian, data06$v_CA06_1306..Black, data06$v_CA06_1307..Filipino, data06$v_CA06_1308..Latin.American, data06$v_CA06_1309..Southeast.Asian, data06$v_CA06_1310..Arab, data06$v_CA06_1311..West.Asian, data06$v_CA06_1312..Korean, data06$v_CA06_1313..Japanese, data06$v_CA06_1314..Visible.minority..n.i.e., data06$v_CA06_1315..Multiple.visible.minority, data06$v_CA06_1316..Not.a.visible.minority)
write.csv(raceData21, file = "raceData21.csv", row.names=TRUE)
write.csv(raceData06, file = "raceData06.csv", row.names=TRUE)
setwd("C:/Users/mahm4/Desktop/uni/ggr472/ggr472-group-project/data")
